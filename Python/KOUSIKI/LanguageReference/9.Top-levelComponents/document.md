以下は、「9. Top-level components」章の日本語訳です。

---

# 9. トップレベル要素

Python インタプリタは、標準入力やプログラム引数として渡されたスクリプト、対話的に入力されたコード、モジュールソースファイルなど、さまざまなソースから入力を受け取ることができます。この章では、そのような場合に用いられる構文について説明します。

---

## 9.1. 完全な Python プログラム

言語仕様がインタプリタの起動方法を定める必要はありませんが、完全な Python プログラムという概念があると便利です。  
完全な Python プログラムは、最小限に初期化された環境で実行されます。すなわち、組み込みモジュールおよび標準モジュールはすべて利用可能ですが、初期化済みのものは、sys（各種システムサービス）、builtins（組み込み関数、例外、None）および **main**（完全なプログラムの実行時のローカルおよびグローバル名前空間を提供するため）だけです。

完全なプログラムの構文は、次の節で説明するファイル入力用の構文と同じです。

また、インタプリタは対話モードで起動することもできます。この場合、完全なプログラム全体を読み込んで実行するのではなく、１回につき１つの文（複合文を含む場合もある）を読み込んで実行します。初期環境は完全なプログラムの場合と同一であり、各文は **main** の名前空間で実行されます。

完全なプログラムは、以下の３つの方法でインタプリタに渡すことができます：

- コマンドラインオプション `-c` を用いた文字列
- プログラム引数として渡されたファイル
- 標準入力

もし、ファイルや標準入力が tty デバイスであれば、インタプリタは対話モードに入り、そうでなければファイル全体を完全なプログラムとして実行します。

---

## 9.2. ファイル入力

非対話的なファイルから読み込まれるすべての入力は、次の構文に従います：

```
file_input ::= (NEWLINE | statement)*
```

この構文は以下の場合に使用されます：

- ファイルまたは文字列から完全な Python プログラムを解析する場合
- モジュールを解析する場合
- exec() 関数に渡される文字列を解析する場合

---

## 9.3. 対話的入力

対話モードでの入力は、次の文法を用いて解析されます：

```
interactive_input ::= [stmt_list] NEWLINE | compound_stmt NEWLINE
```

※ 対話モードでは、（トップレベルの）複合文は必ず空行で終わらなければなりません。これは、パーサが入力の終わりを検出するために必要です。

---

## 9.4. 式入力

eval() 関数は式入力のために使用されます。eval() は先行する空白を無視します。  
eval() に渡される文字列は、次の構文に従わなければなりません：

```
eval_input ::= expression_list NEWLINE*
```

---

© Copyright 2001-2025, Python Software Foundation  
このページは Python Software Foundation License Version 2 の下でライセンスされています。  
ドキュメント中の例、レシピ、その他のコードは Zero Clause BSD License の下で追加ライセンスされています。  
詳細は History and License を参照してください。

Python Software Foundation は非営利団体です。  
寄付をお願いします。

最終更新: 2025 年 2 月 28 日 (08:46 UTC)  
バグを発見しましたか？  
Created using Sphinx 8.2.1.
